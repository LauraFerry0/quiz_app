<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Quiz Page</title>
    <link rel="stylesheet" th:href="@{/css/theme.css}">
    <link rel="stylesheet" th:href="@{/css/quiz.css}">
</head>
<body>
<div class="moving-lines">
    <!-- Horizontal Lines -->
    <div class="line1"></div>
    <div class="line2"></div>
    <div class="line3"></div>
    <div class="line4"></div>
    <div class="line5"></div>
    <div class="line6"></div>

    <!-- Vertical Lines -->
    <div class="vline1"></div>
    <div class="vline2"></div>
    <div class="vline3"></div>
    <div class="vline4"></div>
    <div class="vline5"></div>
    <div class="vline6"></div>
</div>

<div class="main-container">
    <div class="welcome-text-container">
        <div class="welcome-text">
            <h1>Guess The Year</h1>
        </div>
    </div>

    <div class="boxes-container-wrapper" th:if="${quizItem != null}">
        <div class="boxes-container">
            <div th:if="${quizItem.song != null}" class="box">
                <h2>Song</h2>
                <p><strong>Artist:</strong> <span th:text="${quizItem.song.artist}"></span></p>
                <p><strong>Title:</strong> <span th:text="${quizItem.song.title}"></span></p>
                <audio controls autoplay th:if="${quizItem.song != null}">
                    <source th:src="@{'/music/' + ${quizItem.song.downloadPath}}" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
            </div>

            <div th:if="${quizItem.movie != null}" class="box">
                <h2>Movie</h2>
                <img th:src="@{'/posters/' + ${quizItem.movie.posterPath}}" alt="Movie Poster" class="poster-image" th:if="${quizItem.movie != null}"/>
                <p th:text="${quizItem.movie.title}"></p>
            </div>

            <div th:if="${quizItem.newsEvent != null}" class="box headline">
                <h2>Headline</h2>
                <p th:text="${quizItem.newsEvent.headline}"></p>
            </div>
        </div>

        <div th:if="${timeLeft > 0 && canSubmit}" class="quiz-timer">
            <p>Time left: <span id="time-left" th:text="${timeLeft}">30</span> seconds</p>
        </div>

        <form method="post" th:action="@{/quiz/submit}" class="centred-form">
            <input type="hidden" name="quizItemId" th:value="${quizItem.id}" />
            <div class="form-group">
                <label for="guessedYear" class="styled-label">Your Guess:</label>
                <input type="number" id="guessedYear" name="guessedYear" class="styled-input" required th:disabled="${!canSubmit}" />
            </div>
            <button type="submit" class="button" th:disabled="${!canSubmit}">Submit</button>
        </form>

    </div>

    <div th:if="${quizItem == null}">
        <p>Loading...</p>
    </div>
</div>
<script th:src="@{/js/countdown.js}"></script>
</body>
</html>
