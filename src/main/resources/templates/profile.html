<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Profile</title>

  <link rel="stylesheet" href="../css/theme.css" th:href="@{/css/theme.css}">
  <link rel="stylesheet" href="../css/profile.css" th:href="@{/css/profile.css}">
</head>

<body>

  
  <nav class="top-nav" th:if="${#authorization.expression('isAuthenticated()')}">
      <a class="nav-button" th:href="@{/profile}" th:if="${!isSelf}"> Home</a>
      <a class="nav-button" th:href="@{/quiz}">quiz</a>
      <a class="nav-button" th:href="@{/leaderboard}">Leaderboard</a>
      <a class="nav-button" th:href="@{/rules}">guide</a>

      <div class="nav-right">
          <a class="nav-button" th:href="@{/settings}" th:if="${isSelf}">Settings</a>
          <form th:action="@{/logout}" method="post" class="logout-form">
            <button type="submit" class="nav-button logout-button">LOGOUT</button>
          </form>
      </div>
  </nav>

  <div class="moving-lines">
    <div class="line1"></div><div class="line2"></div><div class="line3"></div>
    <div class="line4"></div><div class="line5"></div><div class="line6"></div>

    <div class="vline1"></div><div class="vline2"></div><div class="vline3"></div>
    <div class="vline4"></div><div class="vline5"></div><div class="vline6"></div>
  </div>

  <div class="main-container">
    <h1 class="welcome-text">Profile</h1>

    <div class="profile-container">

        <div class="profile-picture-container">
            <img th:src="@{/profile-pics/me(v=${#dates.createNow().time})}"
                 alt="Profile"
                 class="profile-picture" />
        </div>

      <div class="profile-username-container">
        <h2 class="profile-username" th:text="${profile.username?.toUpperCase()}"></h2>
      </div>

      <div th:if="${stats}" class="profile-stats">
        <div class="profile-stats-container">
          <h3 class="profile-stats-title">Stats</h3>

          <div class="profile-stats-table">
            <div class="profile-stats-label">Total Points:</div>
            <div class="profile-stats-value" th:text="${stats.totalPoints}"></div>

            <div class="profile-stats-label">Right Guesses:</div>
            <div class="profile-stats-value" th:text="${stats.totalRightGuesses}"></div>

            <div class="profile-stats-label">Streak:</div>
            <div class="profile-stats-value" th:text="${stats.totalDaysAttemptedQuiz}"></div>
          </div>
        </div>
      </div>

    </div>
  </div>

</body>
</html>
