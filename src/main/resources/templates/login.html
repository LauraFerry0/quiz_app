<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Page</title>
    <link
      rel="stylesheet"
      th:href="@{/css/login.css}"
    />
  </head>

  <body>
    <div class="moving-lines">
      <!-- Horizontal Lines -->
      <div class="line1"></div>
      <div class="line2"></div>
      <div class="line3"></div>
      <div class="line4"></div>
      <div class="line5"></div>
      <div class="line6"></div>

      <!-- Vertical Lines -->
      <div class="vline1"></div>
      <div class="vline2"></div>
      <div class="vline3"></div>
      <div class="vline4"></div>
      <div class="vline5"></div>
      <div class="vline6"></div>
    </div>

    <div class="header">IN THIS YEAR</div>

    <div
      th:classappend="${errorMessage != null || successMessage != null} ? 'message-present' : ''"
      class="main-container"
    >
      <h2 class="welcome-text">Login</h2>

      <div class="login-container">
        <div th:if="${errorMessage}" class="message-container error-message">
          <p class="message" th:text="${errorMessage}"></p>
        </div>

        <div
          th:if="${successMessage}"
          class="message-container success-message"
        >
          <p class="message" th:text="${successMessage}"></p>
        </div>

        <form th:action="@{/login}" method="post">
          <div class="input-container">
            <input
              type="text"
              name="username"
              autocomplete="username"
              placeholder="Username"
              required
            />

            <div class="password-wrapper">
              <input
                type="password"
                id="password"
                name="password"
                autocomplete="current-password"
                placeholder="Password"
                required
              />

              <button
                type="button"
                class="toggle-password"
                aria-label="Show password"
                aria-pressed="false"
                title="Show password"
              >
                üëÅ
              </button>
            </div>
          </div>

          <div class="button-container">
            <button type="submit" class="login-button">Enter</button>
          </div>
        </form>

        <div class="link-container">
          <a th:href="@{/register}" class="register-link">Register!</a>
          <a th:href="@{/forgot-password}" class="forgot-password-link"
            >Forgot Password?</a
          >
        </div>
      </div>
    </div>

    <script>
      const toggleBtn = document.querySelector(".toggle-password");
      const passwordInput = document.getElementById("password");

      toggleBtn.addEventListener("click", () => {
        const isHidden = passwordInput.type === "password";
        passwordInput.type = isHidden ? "text" : "password";

        toggleBtn.setAttribute("aria-pressed", String(isHidden));
        toggleBtn.setAttribute(
          "aria-label",
          isHidden ? "Hide password" : "Show password",
        );
        toggleBtn.title = isHidden ? "Hide password" : "Show password";
        toggleBtn.textContent = isHidden ? "üôà" : "üëÅ";
      });
    </script>
  </body>
</html>
